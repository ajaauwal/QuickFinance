{% extends 'base.html' %}

{% block content %}
{% load static %}

<body>
    <!-- Go Back Button -->
    <a href="javascript:history.back()" class="go-back-btn">← Go Back</a>

<div class="main-container">
    <div class="right-panel">
        <h1>GOTV Payment</h1>
        <div class="form-container">
            <div class="form-section">
                <label for="account_number">Account Number:</label>
                <input type="text" id="account_number" placeholder="Enter GoTV Account Number" />

                <label for="customer_type">Customer Type:</label>
                <select id="customer_type">
                    <option value="residential">Residential</option>
                    <option value="commercial">Commercial</option>
                </select>

                <h3>Select GOTV Package</h3>
                <div class="recharge-categories">
                    <div class="package-card" id="plan_supaplus" onclick="selectPlan('supaplus', 'Supa+ - ₦16,800')">
                        <img src="{% static 'images/supaplus.png' %}" alt="supa+" />
                        <div class="package-details">
                            <h4>Supa+</h4>
                            <p>₦16,800</p>
                        </div>
                    </div>

                    <div class="package-card" id="plan_supa" onclick="selectPlan('supa', 'Supa - ₦11,400')">
                        <img src="{% static 'images/supa.png' %}" alt="Supa" />
                        <div class="package-details">
                            <h4>Supa</h4>
                            <p>₦11,400</p>
                        </div>
                    </div>

                    <div class="package-card" id="plan_max" onclick="selectPlan('max', 'Max - ₦8,500')">
                        <img src="{% static 'images/max.png' %}" alt="Max" />
                        <div class="package-details">
                            <h4>Max</h4>
                            <p>₦8,500</p>
                        </div>
                    </div>

                    <div class="package-card" id="plan_jolli" onclick="selectPlan('jolli', 'Jolli - ₦5,800')">
                        <img src="{% static 'images/jolli.png' %}" alt="Jolli" />
                        <div class="package-details">
                            <h4>Jolli</h4>
                            <p>₦5,800</p>
                        </div>
                    </div>

                    <div class="package-card" id="plan_jinja" onclick="selectPlan('jinja', 'Jinja - ₦3,900')">
                        <img src="{% static 'images/jinja.png' %}" alt="Jinja" />
                        <div class="package-details">
                            <h4>Jinja</h4>
                            <p>₦3,900</p>
                        </div>
                    </div>

                    <div class="package-card" id="plan_smallie" onclick="selectPlan('smallie', 'Smallie - ₦1,900')">
                        <img src="{% static 'images/smallie.png' %}" alt="Smallie" />
                        <div class="package-details">
                            <h4>Smallie</h4>
                            <p>₦1,900</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    /* Global Resets & Fonts */
    body {
        margin: 0;
        padding: 0;
        font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(to bottom right, #0d47a1, #1976d2);
        color: #f5f5f5;
    }
    
    /* Container Styling */
    .main-container {
        max-width: 960px;
        margin: 40px auto;
        padding: 30px;
        background: #ffffff;
        color: #333;
        border-radius: 16px;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
    }
    
    /* Header */
    h1 {
        font-size: 2.5rem;
        color: #0d47a1;
        text-align: center;
        margin-bottom: 30px;
        text-shadow: 0 2px 8px rgba(255, 255, 255, 0.6);
    }
    
    /* Form Section */
    .form-section {
        background-color: #03679da0;
        padding: 25px;
        border-radius: 12px;
        margin-bottom: 40px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
    }
    
    /* Labels & Inputs */
    label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: #333;
    }
    
    input, select {
        width: 100%;
        padding: 14px;
        font-size: 15px;
        border-radius: 8px;
        border: 1px solid #ccc;
        margin-bottom: 20px;
        background-color: #ffffff;
        transition: border-color 0.3s, box-shadow 0.3s;
    }
    
    input:focus, select:focus {
        border-color: #1976d2;
        box-shadow: 0 0 6px rgba(25, 118, 210, 0.4);
        outline: none;
    }
    
    /* Recharge Categories */
    .recharge-categories {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
        gap: 20px;
        margin-top: 20px;
    }
    
    .package-card {
        background: rgba(255, 255, 255, 0.08);
        border-radius: 12px;
        text-align: center;
        padding: 15px;
        transition: all 0.3s ease;
        cursor: pointer;
        border: 2px solid transparent;
    }
    
    .package-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
    }
    
    .package-card.selected {
        border-color: #2196f3;
        background-color: rgb(2, 19, 129);
    }
    
    .package-card img {
        width: 100%;
        height: 100px;
        object-fit: cover;
        border-radius: 8px;
    }
    
    .package-card h4,
    .package-card p {
        margin: 10px 0 0;
        color: #fff;
    }
    
    /* Buttons */
    button, .dstv-button {
        width: 100%;
        background-color: #0d47a1;
        color: #011c94;
        padding: 14px 20px;
        font-size: 16px;
        font-weight: 600;
        border: none;
        border-radius: 8px;
        margin-top: 10px;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }
    
    button:hover, .dstv-button:hover {
        background-color: #083b8b;
        transform: translateY(-2px);
    }
    
    /* GOTV Section */
    .gotv-container {
        margin: 40px auto;
        background: #010384;
        padding: 30px;
        border-radius: 16px;
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
    }
    
    .gotv-title {
        font-size: 2rem;
        text-align: center;
        color: #012c6d;
        margin-bottom: 20px;
    }
    
    .gotv-subtitle {
        font-size: 18px;
        color: #0d47a1;
        margin: 20px 0 10px;
    }
    
    /* GOTV Package Cards */
    .gotv-packages {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
        gap: 20px;
    }
    
    .gotv-card {
        background: #031d9f;
        border-radius: 12px;
        box-shadow: 0 2px 12px rgba(0,0,0,0.05);
        cursor: pointer;
        transition: all 0.3s ease;
        overflow: hidden;
        border: 2px solid transparent;
    }
    
    .gotv-card.selected {
        border-color: #1976d2;
        box-shadow: 0 6px 18px rgba(25, 118, 210, 0.2);
    }
    
    .gotv-card img {
        width: 100%;
        height: 120px;
        object-fit: cover;
    }
    
    .card-info {
        padding: 15px;
        text-align: center;
    }
    
    .card-info h4 {
        font-size: 16px;
        color: #0d47a1;
        margin-bottom: 5px;
    }
    
    .card-info p {
        font-size: 14px;
        color: #666;
    }
    
    /* Responsive Adjustments */
    @media (max-width: 768px) {
        .main-container, .dstv-container {
            margin: 20px;
            padding: 20px;
        }
    
        h1 {
            font-size: 2rem;
        }
    
        .recharge-categories {
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        }
    
        .dstv-packages {
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
        }
    }
    </style>
    


<script>
    let selectedPlan = null;

    function selectPlan(planId, details) {
        if (selectedPlan) {
            document.getElementById('plan_' + selectedPlan).classList.remove('selected');
        }
        selectedPlan = planId;
        document.getElementById('plan_' + planId).classList.add('selected');
        window.selectedPlanDetails = details;
    }

    function processPayment() {
        const accountNumber = document.getElementById('account_number').value.trim();
        const customerType = document.getElementById('customer_type').value;

        if (!accountNumber || !selectedPlan) {
            alert('Please select a GoTV package and fill in all fields!');
            return;
        }

        const paymentData = {
            account_number: accountNumber,
            customer_type: customerType,
            plan: selectedPlan,
            plan_details: window.selectedPlanDetails
        };

        fetch('/api/gotv_payment/', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': '{{ csrf_token }}'
            },
            body: JSON.stringify(paymentData)
        })
        .then(res => res.json())
        .then(data => {
            alert(data.success ? 'Payment successful!' : 'Payment failed! Please try again.');
        })
        .catch(err => {
            console.error(err);
            alert('An error occurred. Please try again later.');
        });
    }
</script>

{% endblock %}